{
    "actions": [],
    "autoname": "field:task_name",
    "creation": "2025-12-28 12:00:00.000000",
    "doctype": "DocType",
    "engine": "InnoDB",
    "field_order": [
        "app_version_display",
        "task_name",
        "enabled",
        "execution_order",
        "sync_direction",
        "column_break_basic",
        "source_table",
        "target_doctype",
        "description",
        "mapping_section",
        "field_mapping",
        "where_clause",
        "incremental_sync_section",
        "updated_at_field",
        "updated_at_timezone",
        "column_break_incremental",
        "sync_buffer_minutes",
        "use_incremental_sync",
        "status_section",
        "last_run_at",
        "last_run_status",
        "column_break_status",
        "rows_synced",
        "last_error",
        "actions_section",
        "run_now_button",
        "create_mirror_doctype_button",
        "delete_all_records_button",
        "column_mapping_section",
        "column_mapping_display",
        "column_mapping_html"
    ],
    "fields": [
        {
            "fieldname": "app_version_display",
            "fieldtype": "HTML",
            "label": "App Version"
        },
        {
            "fieldname": "task_name",
            "fieldtype": "Data",
            "label": "Task Name",
            "reqd": 1,
            "unique": 1,
            "description": "Unique identifier for this sync task"
        },
        {
            "fieldname": "enabled",
            "fieldtype": "Check",
            "label": "Enabled",
            "default": "1"
        },
        {
            "fieldname": "execution_order",
            "fieldtype": "Int",
            "label": "Execution Order",
            "default": "10",
            "description": "Lower numbers run first"
        },
        {
            "fieldname": "sync_direction",
            "fieldtype": "Select",
            "label": "Sync Direction",
            "options": "WP to Frappe\nFrappe to WP\nBidirectional",
            "default": "WP to Frappe",
            "reqd": 1
        },
        {
            "fieldname": "column_break_basic",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "source_table",
            "fieldtype": "Data",
            "label": "Source Table/View",
            "reqd": 1,
            "description": "WordPress table or view name (e.g., wp_zoho_registrations_new_site)"
        },
        {
            "fieldname": "target_doctype",
            "fieldtype": "Link",
            "label": "Target DocType",
            "options": "DocType",
            "reqd": 0,
            "description": "Frappe DocType to sync into (auto-filled by Create Mirror DocType button)"
        },
        {
            "fieldname": "description",
            "fieldtype": "Small Text",
            "label": "Description"
        },
        {
            "fieldname": "mapping_section",
            "fieldtype": "Section Break",
            "label": "Field Mapping"
        },
        {
            "fieldname": "field_mapping",
            "fieldtype": "JSON",
            "label": "Field Mapping (JSON)",
            "description": "JSON object mapping WP columns to Frappe fields. Example: {\"wp_column\": \"frappe_field\", \"id\": \"wp_source_id\"}"
        },
        {
            "fieldname": "where_clause",
            "fieldtype": "Small Text",
            "label": "WHERE Clause (Optional)",
            "description": "SQL WHERE clause to filter source data (without 'WHERE' keyword)"
        },
        {
            "fieldname": "incremental_sync_section",
            "fieldtype": "Section Break",
            "label": "Incremental Sync Settings",
            "collapsible": 1
        },
        {
            "fieldname": "use_incremental_sync",
            "fieldtype": "Check",
            "label": "Use Incremental Sync",
            "default": "1",
            "description": "Only sync records updated since last run (requires updated_at field)"
        },
        {
            "fieldname": "updated_at_field",
            "fieldtype": "Data",
            "label": "Updated At Field",
            "description": "Column name in WordPress table that stores the last updated timestamp (e.g., updated_at, modified_date)",
            "depends_on": "eval:doc.use_incremental_sync"
        },
        {
            "fieldname": "updated_at_timezone",
            "fieldtype": "Select",
            "label": "Timestamp Timezone",
            "options": "UTC\nServer Local Time",
            "default": "UTC",
            "description": "Timezone of the updated_at timestamps in WordPress",
            "depends_on": "eval:doc.use_incremental_sync"
        },
        {
            "fieldname": "column_break_incremental",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "sync_buffer_minutes",
            "fieldtype": "Int",
            "label": "Sync Buffer (Minutes)",
            "default": "3",
            "description": "Look back this many minutes to catch records updated during sync",
            "depends_on": "eval:doc.use_incremental_sync"
        },
        {
            "fieldname": "status_section",
            "fieldtype": "Section Break",
            "label": "Last Execution Status"
        },
        {
            "fieldname": "last_run_at",
            "fieldtype": "Datetime",
            "label": "Last Run At",
            "read_only": 1
        },
        {
            "fieldname": "last_run_status",
            "fieldtype": "Select",
            "label": "Last Run Status",
            "options": "\nSuccess\nFailed\nPartial",
            "read_only": 1
        },
        {
            "fieldname": "column_break_status",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "rows_synced",
            "fieldtype": "Int",
            "label": "Rows Synced",
            "read_only": 1
        },
        {
            "fieldname": "last_error",
            "fieldtype": "Small Text",
            "label": "Last Error",
            "read_only": 1
        },
        {
            "fieldname": "actions_section",
            "fieldtype": "Section Break",
            "label": "Actions"
        },
        {
            "fieldname": "run_now_button",
            "fieldtype": "Button",
            "label": "Run Sync Now"
        },
        {
            "fieldname": "create_mirror_doctype_button",
            "fieldtype": "Button",
            "label": "Create Mirror DocType",
            "description": "Auto-create a Frappe DocType that mirrors the WordPress table structure"
        },
        {
            "fieldname": "delete_all_records_button",
            "fieldtype": "Button",
            "label": "Delete All Records",
            "description": "Delete all records from the Target DocType (cannot be undone!)"
        },
        {
            "fieldname": "column_mapping_section",
            "fieldtype": "Section Break",
            "label": "Column Mapping",
            "collapsible": 1
        },
        {
            "fieldname": "column_mapping_display",
            "fieldtype": "HTML",
            "label": "Column Mapping Table"
        },
        {
            "fieldname": "column_mapping_html",
            "fieldtype": "Text",
            "label": "Column Mapping HTML",
            "hidden": 1
        }
    ],
    "links": [],
    "modified": "2025-12-28 12:00:00.000000",
    "modified_by": "Administrator",
    "module": "WP Sync",
    "name": "WP Sync Task",
    "naming_rule": "By fieldname",
    "owner": "Administrator",
    "permissions": [
        {
            "create": 1,
            "delete": 1,
            "email": 1,
            "export": 1,
            "print": 1,
            "read": 1,
            "report": 1,
            "role": "System Manager",
            "share": 1,
            "write": 1
        }
    ],
    "sort_field": "execution_order",
    "sort_order": "ASC",
    "track_changes": 1
}

